(this["webpackJsonpminesweeper-react"]=this["webpackJsonpminesweeper-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/mouse.edcc802a.svg"},12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),l=a.n(i),s=(a(17),a(2)),c=a(3),o=a(5),u=a(4),m=a(1),h=a(6),d=(a(18),a(10)),f=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={difficulty:10,size:8},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(d.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this.props.startGame;e.preventDefault(),t(this.state)}},{key:"render",value:function(){return r.a.createElement("div",{className:"menu"},r.a.createElement("h1",{className:"game-title"},"The Minesweeper"),r.a.createElement("form",{className:"form-config",onSubmit:this.handleSubmit},r.a.createElement("label",{className:"form-config__label"},"Size",r.a.createElement("select",{className:"form-config__select",name:"size",value:this.state.size,onChange:this.handleChange},r.a.createElement("option",{value:"6"},"Tiny"),r.a.createElement("option",{value:"8"},"Normal"),r.a.createElement("option",{value:"10"},"Huge"))),r.a.createElement("label",{className:"form-config__label"},"Difficulty",r.a.createElement("select",{className:"form-config__select",name:"difficulty",value:this.state.difficulty,onChange:this.handleChange},r.a.createElement("option",{value:"5"},"Easy"),r.a.createElement("option",{value:"10"},"Moderate"),r.a.createElement("option",{value:"15"},"Hard"))),r.a.createElement("button",{className:"button button--primary form-config__button"},"New Game")))}}]),t}(r.a.Component),p=a(7),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(e){var t=this.props,a=t.x,n=t.y;e.preventDefault(),"click"!==e.type&&"contextmenu"!==e.type||this.props.onCellClick(e.type,a,n)}},{key:"getCellModifier",value:function(){var e=this.props,t=e.value,a=e.isOpened,n=e.isMarked,r=e.isMine;return n?"cell--marked":r&&a?"cell--mine":n||!a||t?a?"":"cell--closed":"cell--empty"}},{key:"render",value:function(){var e=this.props.value;return r.a.createElement("div",{className:"cell ".concat(this.getCellModifier()),onClick:this.handleClick,onContextMenu:this.handleClick},e)}}]),t}(r.a.Component),b=a(11),g=a.n(b),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={markersLeft:e.mines,isGameOver:!1,isWon:!1,board:null},a.handleCellClick=a.handleCellClick.bind(Object(m.a)(a)),a.openCell=a.openCell.bind(Object(m.a)(a)),a.goToMenu=a.goToMenu.bind(Object(m.a)(a)),a.startGame=a.startGame.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.startGame()}},{key:"startGame",value:function(){var e=this.generateEmptyBoard(),t=this.placeMines(e),a=this.setValues(t);this.setState({board:a,isGameOver:!1,isWon:!1,markersLeft:this.props.mines})}},{key:"generateEmptyBoard",value:function(){for(var e=this.props,t=e.rows,a=e.columns,n=[],r=0;r<t;r++){n[r]=[];for(var i=0;i<a;i++)n[r][i]={isOpened:!1,isMarked:!1,isMine:!1,value:""}}return n}},{key:"placeMines",value:function(e){for(var t=this.props,a=t.mines,n=t.rows,r=t.columns,i=Object(p.a)(e);a;){var l=Math.floor(Math.random()*n),s=Math.floor(Math.random()*r);i[l][s].isMine||(i[l][s].isMine=!0,a-=1)}return i}},{key:"setValues",value:function(e){for(var t=this.props,a=t.rows,n=t.columns,r=Object(p.a)(e),i=0;i<a;i++)for(var l=0;l<n;l++){var s=r[i][l];if(!s.isMine){var c=this.getAdjacentCells(e,i,l).filter((function(e){return!0===e.isMine})).length;c&&(s.value=c)}}return r}},{key:"getAdjacentCells",value:function(e,t,a){for(var n=[],r=-1;r<=1;++r)for(var i=-1;i<=1;++i){var l=e[t+r]?e[t+r][a+i]:null;!l||0===r&&0===i||n.push(l)}return n}},{key:"drawBoard",value:function(){var e=this,t=this.state.board;return r.a.createElement(r.a.Fragment,null,t&&t.map((function(t,a){return r.a.createElement("div",{className:"row",key:"row_"+a},t.map((function(t,n){return r.a.createElement(v,{key:"cell_"+n,x:a,y:n,value:t.value,isOpened:t.isOpened,isMarked:t.isMarked,isMine:t.isMine,onCellClick:e.handleCellClick})})))})))}},{key:"endGame",value:function(){for(var e=this.state.board,t=this.props,a=t.rows,n=t.columns,r=Object(p.a)(e),i=0;i<a;i++)for(var l=0;l<n;l++)r[i][l].isOpened=!0;this.setState({board:r,isGameOver:!0})}},{key:"handleCellClick",value:function(e,t,a){var n=this.state,r=n.board,i=n.isGameOver,l=n.markersLeft;if(!i){var s=Object(p.a)(r),c=s[t][a],o=c.isOpened,u=c.isMine,m=c.isMarked;if("click"===e&&!m){if(u)return void this.endGame();s=this.openCell(s,t,a)}"contextmenu"!==e||o&&!m||(m||l>0)&&(c.isMarked=!c.isMarked),this.setState({board:s}),this.examineBoard()}}},{key:"openCell",value:function(e,t,a){var n=this.props,r=n.rows,i=n.columns;if(t>=r||a>=i||t<0||a<0)return e;var l=Object(p.a)(e),s=l[t][a];return s.isOpened?e:(s.isOpened=!0,s.value||(this.openCell(l,t-1,a),this.openCell(l,t+1,a),this.openCell(l,t,a-1),this.openCell(l,t,a+1)),l)}},{key:"examineBoard",value:function(){var e,t=this.state.board,a=this.props.mines,n=!1,r=t.flat(),i=r.length,l=r.filter((function(e){return!0===e.isMarked})).length;e=a-l,i===l+r.filter((function(e){return!0===e.isOpened})).length&&(n=!0),this.setState({markersLeft:e,isWon:n})}},{key:"goToMenu",value:function(){(0,this.props.changeGameState)("menu")}},{key:"render",value:function(){var e=this.state,t=e.isWon,a=e.isGameOver,n=e.markersLeft,i=!a&&!t;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"game-header"},r.a.createElement("button",{className:"button button--icon game-header__left",onClick:this.goToMenu},"\u2190"),t&&r.a.createElement("span",{className:"game-header__center"},"You won!"),a&&r.a.createElement("span",{className:"game-header__center"},"You lost!"),r.a.createElement("span",{className:"game-header__right"},"Markers left: ",n)),r.a.createElement("div",{className:"game-content"},this.drawBoard()),r.a.createElement("div",{className:"game-footer"},i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Open cell"),r.a.createElement("img",{className:"icon",src:g.a,alt:""}),r.a.createElement("span",null,"Mark mine")),!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button button--primary game__button",onClick:this.goToMenu},"New Game"),r.a.createElement("button",{className:"button button--secondary game__button",onClick:this.startGame},"Restart"))))}}]),t}(r.a.Component),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={config:{difficulty:null,size:null},gameState:"menu"},a.startGame=a.startGame.bind(Object(m.a)(a)),a.changeGameState=a.changeGameState.bind(Object(m.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"startGame",value:function(e){this.setState({config:e}),this.changeGameState("game")}},{key:"changeGameState",value:function(e){this.setState({gameState:e})}},{key:"render",value:function(){var e=this.state,t=e.config,a=e.gameState,n="menu"===a,i="game"===a;return r.a.createElement("div",{className:"minesweeper"},n&&r.a.createElement(f,{startGame:this.startGame}),i&&r.a.createElement(k,{rows:t.size,columns:t.size,mines:t.difficulty,changeGameState:this.changeGameState}))}}]),t}(r.a.Component);l.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.7e48967b.chunk.js.map